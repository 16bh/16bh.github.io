<!DOCTYPE html>
<html lang="zh-CN">

  
<head>
  <meta charset="utf-8">
  <meta name="author" content="董沅鑫, yuanxin.me@gmail.com" />
  
  
  
  <title>SoftWare List - Mac | 凡·间</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="Software," />
  

  <script>
    console.log('\n%c Hexo-theme-bmw v4.0 ' + '%c 🎉 https://github.com/dongyuanxin/theme-bmw 🎉\n' + '\n%c View demo online ' + '%c 🔍 https://godbmw.com/ 🔍  \n' , 'color: #fadfa3; background: #030307; padding:3px 0;', '', 'color: #fadfa3; background: #030307; padding:3px 0;', '');
  </script>

  

  

  
    <link rel="icon" href="/images/favicon.ico">
    <link rel="apple-touch-icon" href="/images/touch-icon.png">
  

  <link href="https://cdn.bootcss.com/fancybox/3.5.2/jquery.fancybox.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/base.css">
<link rel="stylesheet" href="/icon/iconfont.css">
<link rel="stylesheet" href="/css/github-markdown.css">
<link rel="stylesheet" href="/css/highlight.css">

  <script src="/js/util.js"></script>
<script src="/js/valine.min.js"></script>

  

  

  
    <link href="https://cdn.bootcss.com/social-share.js/1.0.16/css/share.min.css" rel="stylesheet">
  
  
  <script src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js" async></script>
  
  
    <script src="//cdn.jsdelivr.net/npm/leancloud-storage@3.11.0/dist/av-min.js"></script>
  

</head>

  <body>

    

    <div id="app">

      <div class="header-wrap">
  <header>
    <div class="site-brand">
      <div class="site-title">
        <a href="/">凡·间</a>
      </div>
    </div>
    <nav class="site-navigation">
      <ul class="nav-menu">
      
        <li class="nav-item" data-path="/">
          
            <a 
              href="/"
              target="_self"
            >
              主页
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/archives/">
          
            <a 
              href="/archives/"
              target="_self"
            >
              归档
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/categories/">
          
            <a 
              href="/categories/"
              target="_self"
            >
              分类
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/tags/">
          
            <a 
              href="/tags/"
              target="_self"
            >
              标签
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/about/">
          
            <a 
              href="/about/"
              target="_self"
            >
              关于
            </a>
          
        </li>
      
      </ul>
    </nav>
    <i class="iconfont icon-menu"></i>
  </header>
</div>

<script>
  let links = document.querySelectorAll('.nav-item');
  for(let link of links){
    let childrenLink = link.querySelector('ul');
    link.addEventListener('mouseenter', () => {
      if(childrenLink) {
        childrenLink.className = "nav-menu--dropdown active";
      }
    })
    link.addEventListener('mouseleave', () => {
      if(childrenLink) {
        childrenLink.className = "nav-menu--dropdown";
      }
    })
  }
  let rootRealPath = getRealPath(window.location.pathname, true);
  for(let link of links) {
    let linkPath = link.getAttribute("data-path");
    if(linkPath && getRealPath(linkPath, true) === rootRealPath) {
      link.className = "nav-item hover";
    }
  }

  let iconMenu = document.querySelector("i.iconfont.icon-menu"),
    iconMenuClicked = false;
  let navDOM = document.querySelector("nav.site-navigation");
  iconMenu.addEventListener("click", () => {
    iconMenuClicked 
      ? navDOM.className = "site-navigation active"
      : navDOM.className = "site-navigation";
    iconMenuClicked = !iconMenuClicked;
  })
</script>

      








<div class="container post-index">

  

<div class="post">
  <h1 class="article-title">
    <span>SoftWare List - Mac</span>
  </h1>
  <div class="article-top-meta">
    <span>
      发布 : 
      2016-08-16
    </span>
    
      <span>
        分类 : 
          <a href="/categories/Software/">
            Software
          </a>
      </span>
    
    
      <span>
        浏览 : <span class="article-timer" data-identity="mac-software-list"></span>
      </span>
    
  </div>

  

  <div class="article-content">
    <div class="markdown-body">
      <h1 id="装机必备"><a href="#装机必备" class="headerlink" title="装机必备"></a>装机必备</h1><ul>
<li><code>LastPass</code>  从此只要记住一个密码</li>
<li><code>Xee3</code>     比系统自带图片浏览效果更佳,可以直接查看下一张图片</li>
<li><code>The Unarchiver</code>     免费解压</li>
<li><a href="https://freemacsoft.net/appcleaner/" target="_blank" rel="external"><code>Appcleaner</code></a>  免费软件卸载</li>
<li><code>PDF Expert</code>    PDF阅读工具，收费</li>
<li><code>Folx</code>   下载工具</li>
<li><code>Evernote</code>   云笔记，配合浏览器的剪裁插件，一键保存网页内容到笔记本中，有移动版本</li>
<li><del><code>Quiver</code>  必装，程序员必备知识库整理工具 支持markdown语法，暂时没有移动端(破解版bug比较多)</del></li>
<li><code>iTools</code>  管理iphone工具</li>
<li><code>Mail</code>  自带的邮件客户端</li>
<li><code>ShadowsocksX</code>  必装,科学上网工具</li>
<li><code>f.lux</code>  自动调节屏幕亮度<br><img src="/2016/08/16/mac-software-list/1489378577.png" width="517" height="593"></li>
<li><code>XCode</code>  基础工具</li>
</ul>
<h1 id="开发工具"><a href="#开发工具" class="headerlink" title="开发工具"></a>开发工具</h1><ul>
<li><p><code>SourceTree</code>   必装，git客户端</p>
</li>
<li><p><code>github desktop</code> git客户端</p>
</li>
<li><p><code>Cornerstone</code>  svn客户端</p>
</li>
<li><p><code>Sequel Pro</code>   免费数据库管理工具</p>
</li>
<li><p><code>Navicat Premium</code>  prosql数据库管理工具</p>
</li>
<li><p><code>Chrome</code>   开发最佳浏览器（之一）<br>必装插件</p>
<p>  <img src="/2016/08/16/mac-software-list/1489378622.png" width="836" height="520"></p>
</li>
</ul>
<ul>
<li><code>Charles</code> 必备，抓包工具</li>
<li><code>Dash</code>  收费开发参考手册，并且能与各种浏览器整合</li>
<li><a href="http://devdocs.io" target="_blank" rel="external"><code>devdocs</code></a>  <a href="https://www.v2ex.com/member/helloSwift" target="_blank" rel="external">helloSwift</a>推荐的Dash替代产品，免费<br><img src="/2016/08/16/mac-software-list/1490668840917.png" alt=""></li>
<li><del><code>Gas Mask</code>  管理hosts文件,最新版本系统不支持</del></li>
<li><code>iHosts</code>  hosts管理工具</li>
<li><code>switchHosts</code>  hosts管理工具，可以分组，我在用的</li>
<li><code>iThoughtsX</code>   思维导图，收费</li>
<li><code>MindNode</code>  思维导图工具，收费</li>
<li><a href="https://www.processon.com/i/5760ecd1e4b04678e07895bb" target="_blank" rel="external"><code>Process On</code></a>  在线制作流程图工具,免费，有次数限制，邀请好友可以增加次数</li>
<li><code>OmniGraffle</code> 流程图制作，贼好用</li>
<li><code>postman</code>  模拟post请求</li>
<li><code>Cocoa Rest Client</code></li>
<li><code>DiffMerge</code>  免费的代码比对工具,基本够用</li>
<li><a href="http://www.scootersoftware.com/download.php" target="_blank" rel="external"><code>Beyond Compare</code></a>  代码比对</li>
<li><code>Medis</code>  收费的redis交互软件</li>
<li><code>redis desk manager</code>  免费的可视化redis工具，缺点是在mac系统容易crash，可能跟我用的是破解有关系</li>
</ul>
<h1 id="服务"><a href="#服务" class="headerlink" title="服务"></a>服务</h1><ul>
<li>php   系统自带了5.3版本的php，可以删除掉安装自己想要的版本，也可以安装多个版本</li>
<li>nginx/apache 系统自带了apache，启用即可，未默认安装nginx，需要手动安装</li>
<li>mysql</li>
<li>homebrew/homebrew-cask 必备，用homebrew来安装常用的服务如php等，用homebrew-cask安装软件，运行一句命令行即可安装</li>
</ul>
<h1 id="效率"><a href="#效率" class="headerlink" title="效率"></a>效率</h1><ul>
<li><p><code>Quitter</code>     自动隐藏或关闭闲置的窗口</p>
</li>
<li><p><code>spotlight</code>           系统自带，启动软件，查找文件</p>
</li>
<li><p><code>Alfred</code>     Spotlight替代，快速启动软件，workflow功能。（注：免费版够用了，没有workflow功能也能接受）</p>
</li>
</ul>
<p>  重点推荐以下workflow，可以自己google到扩展包<br>  一是<code>,b</code>,可以直接在<code>Alfred</code>搜索chrome浏览器的书签<br>  <img src="/2016/08/16/mac-software-list/1489386505.png" width="559" height="483"><br>  二是<code>markdown image</code>可以将剪贴板中的截图文件上传到七牛云，并转换为markdown可用的图片链接</p>
<blockquote>
<p>此插件可以用U图床代替</p>
</blockquote>
<p><img src="/2016/08/16/mac-software-list/1489386654.png" width="842" height="283"><br>三是Dash插件 直接dash+你要搜索的关键字<br><img src="/2016/08/16/mac-software-list/1490668947.png" width="565" height="164"></p>
<ul>
<li><code>Yoink</code>     收费，临时存放文件</li>
<li><code>Paste</code>     收费，记录剪切历史，随时调用之前剪切的内容，甚至可以搜索你之前剪切的内容</li>
<li><code>PopClip</code>   收费，选择文字会自动弹出菜单，提供复制、粘贴、保存到印象笔记等各种扩展功能</li>
<li><code>Moom</code>   收费，调节窗口大小，并实现Windows经典功能，拖动窗口到屏幕的最左边或最右边的时候会自动半屏，拖动到屏幕左上边会自动全屏</li>
<li><code>Magnet</code>  功能跟Moom一样，免费哦</li>
<li><code>Manico</code>   快速启动dock栏软件，其实用Alfred就够了</li>
<li><code>HyperDock</code>   预览软件打开的窗口，拖动窗口自动半屏、全屏</li>
<li><code>uBar</code> windows任务栏效果,不过挺贵<br><img src="/2016/08/16/mac-software-list/20170401149101624985514.png" alt="20170401149101624985514.png"></li>
<li><code>Bartender</code>  收费，整理菜单栏，将不常用的菜单栏图标隐藏起来</li>
<li><a href="http://vanilla.matthewpalmer.net/r/6d400915" target="_blank" rel="external"><code>Vanilla</code></a>  类似Bartender,免费的菜单栏工具，收费升级pro</li>
<li>[<code>dozer</code>] 功能类似bartender，brew安装，免费</li>
<li><code>aText</code>   收费，片段工具，输入简短的别名替换成复杂的终端命令、代码片段等</li>
<li><code>textExpander</code> 收费，没用过功能同<code>aText</code>,更贵</li>
<li><code>奇妙清单</code>(<code>WunderList</code>)         免费，清单工具，移动端同步</li>
<li><code>todoList</code>  任务管理，和移动端同步</li>
<li><a href="http://todolist.site/#quickstart" target="_blank" rel="external"><code>todolist</code></a> 在终端显示任务列表<br>安装方式：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">homebrew install todolist</div></pre></td></tr></table></figure>
<p><img src="/2016/08/16/mac-software-list/1490259924.png"></p>
<ul>
<li><code>RescueTime</code>  【拯救你的时间】，顾名思义，可以记录你的软件使用习惯，看你一天工作和娱乐的时间占比是多少，程序员的话更推荐下面的插件</li>
<li><code>wakatime</code>  免费，收费服务更强大，超强插件，程序员编程习惯统计，可以统计你在不同的编辑器或者语言上分配的时间，支持几乎所有主流的编辑器<br><img src="/2016/08/16/mac-software-list/1489378066.png" width="573" height="511"></li>
<li><p><code>PixelScheduler</code>  在屏幕右侧以线条的形式显示一天的日程，限免<br><img src="/2016/08/16/mac-software-list/1489379054.png" width="166" height="163"></p>
</li>
<li><p><code>Go2Shell</code>  在Finder中打开终端并进入当前项目路径,支持默认终端，不支持iterm2,按住Command的键将app拖到finder菜单栏</p>
</li>
<li><code>TermHere</code>  在Finder中打开终端并进入当前项目路径，支持iterm2</li>
<li><code>Pocket</code>   延迟阅读，搭配浏览器插件使用，将别人分享或自己看到的好文章保存备用</li>
</ul>
<h1 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h1><ul>
<li><code>Fluid</code>     将常用的网页转化成简易app的工具，如石墨、tower、网页版微信、v2ex、豆瓣音乐等</li>
<li><code>CheatSheet</code>   长按Command键显示当前可用的快捷键</li>
<li><code>Snip</code>    腾讯出品的截图小工具，简单实用，可以加注释,唯一的缺点是电脑外接显示器后无法使用</li>
<li><code>Jietu</code>  腾讯出品的另一款截图工具，支持录屏</li>
</ul>
<p><img src="/2016/08/16/mac-software-list/20170407149157049983663.png" alt="20170407149157049983663.png"></p>
<ul>
<li><code>Teampaper Snip</code>  在用的截图工具，完美支持多显示器🖥</li>
<li><code>SnapNDrag Pro</code>  功能强大的截图工具，会将所有的截图保存在自己生成的文件夹中并分类，不可注释，外接显示器后也能使用</li>
<li><code>Noizio</code>   生成白噪音</li>
<li><code>Boom2</code>   音效增强，效果一般</li>
<li><code>Gemini 2</code>  清除重复文件</li>
<li><code>Backgrouds</code>+<a href="http://huoying666.com/" target="_blank" rel="external">火萤</a>   动态桌面，可能导致卡顿和耗电量增加</li>
<li><code>爱壁纸HD</code>        更换壁纸</li>
<li><code>Caffeine</code>   超实用，暂时关闭电脑自动休眠，当你看电影或放映ppt的时候，不会屏幕突然黑掉，再次点击可以关闭此功能。打开的时候图标上的咖啡杯是满的，关闭后是空的，细节满分</li>
<li><code>Keyboard Cleaner</code>  键盘清洁工具，打开此软件时按键不会生效，脸滚键盘也没关系，Command+Q退出</li>
<li><code>Cal Cat</code>  在桌面显示日历，并每日更新一张猫咪的图片</li>
<li><code>Tickeys</code>  免费，模拟机械键盘音效</li>
<li><code>Reeder</code>  收费，RSS阅读，阅读体验极佳<br><img src="/2016/08/16/mac-software-list/1490669228.png"></li>
<li><code>Leaf</code>  RSS阅读，限免</li>
<li><code>scrollreveal</code>  修改mac触摸板滚动方向，享受触控板自然滚动的方便又不改变鼠标的使用习惯</li>
<li><code>Memo</code>  在桌面显示彩色便签</li>
</ul>
<h1 id="音乐"><a href="#音乐" class="headerlink" title="音乐"></a>音乐</h1><ul>
<li><code>iTunes</code>+<code>Lyricsx</code>   苹果自带音乐播放器，可按专辑分类，加上开源的歌词工具</li>
</ul>
<p><img src="/2016/08/16/mac-software-list/20171120151114825072757.png" alt="20171120151114825072757.png"></p>
<ul>
<li><p><code>XLD</code> 将flac格式转换成<code>Apple Lossless</code>格式，以便导入iTunes</p>
</li>
<li><p><code>Listen1</code>聚合音乐，聚合了多个平台：网易·虾米·QQ·酷狗·酷我</p>
<p><img src="/2016/08/16/mac-software-list/image-20181127141710864-3299430.png" alt="image-20181127141710864"></p>
</li>
</ul>
<h1 id="编辑器"><a href="#编辑器" class="headerlink" title="编辑器"></a>编辑器</h1><ul>
<li><p><code>PHPStorm</code>     功能最齐全的PHP开发IDE</p>
</li>
<li><p><code>IntelliJ IDEA</code>  装了php插件相当于phpstorm，装了go插件相当于goland，适用于多语言多项目开发。</p>
</li>
<li><p><code>vscode</code>   微软出品的编辑器，潜力无穷</p>
</li>
<li><p><code>MacVim</code>   编辑单个文件最强大的编辑器，缺点是需要进行超多的配置</p>
</li>
<li><p><code>sublime</code>  最好用的轻量级编辑器,大量插件，写md文件体验也不错<br>![20170329149077718029401.png](mac-software-list/20170329149077718029401.png</p>
</li>
<li><p><code>ATOM</code>    操作习惯于sublime完全相同，更多插件，更炫酷，卸载并重装过无数次，每次用起来都有点卡，期待不卡的时候</p>
</li>
<li><p><del><code>Mou</code>     最轻量级的markdown编辑工具，国人开发（mac系统升级到Sierra后，无法使用），曾经发起众筹后跳票</del></p>
</li>
<li><p><code>MacDown</code>  功能同Mou,作者本人也是自认模仿的Mou，推荐使用</p>
</li>
<li><p><code>MWeb</code>       编辑markdown文件</p>
</li>
<li><p><code>Typora</code>   免费，不同于之前的双栏md编辑器，Typora在编辑的同时进行渲染</p>
</li>
<li><p><del>~<code>Haroopad</code>  markdown编辑器，在左侧提示常用操作，页面更美观，升级到最新版本的mac系统之后经常不会弹出界面,暂时雪藏</del>~<br><img src="/2016/08/16/mac-software-list/1489378450.png"></p>
</li>
<li><p><code>qlmarkdown</code>    以系统自带的预览方式查看md文件</p>
</li>
<li><p><a href="https://itunes.apple.com/cn/app/picu-markdown%E9%93%BE%E6%8E%A5/id1135023555?mt=12" target="_blank" rel="external"><code>PicU</code></a>  <del>U图床，支持上传图片(gif,png)到七牛云并将md格式的链接保存在剪切板中的小工具,灰常的好用</del><br><img src="/2016/08/16/mac-software-list/20170328149067001910274.png" alt="20170328149067001910274.png"></p>
<p>2018-10-15：七牛测试域名过期，此软件可以下岗了</p>
</li>
</ul>
<h1 id="读书"><a href="#读书" class="headerlink" title="读书"></a>读书</h1><ul>
<li><p><code>kindle</code>  手机端pc端均可下载kindle客户端，正版图书可以自动同步阅读进度</p>
</li>
<li><p><code>Klib</code>  将kindle或iBooks中的标注整理到一个软件中阅读</p>
</li>
</ul>
<p><img src="/2016/08/16/mac-software-list/20180621152957023625037.png" alt="20180621152957023625037.png"></p>
<ul>
<li><code>calibre</code>  迄今为止，见过的最强大的本地图书管理工具</li>
</ul>
<p><img src="/2016/08/16/mac-software-list/20180621152957033513772.png" alt="20180621152957033513772.png"></p>
<h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><ul>
<li>科学上网  <a href="https://agentneo.rocks/?rc=nl8sqg64" target="_blank" rel="external">Agentneo</a></li>
</ul>
    </div>
  </div>
  
    <div class="copy-right">
      <div class="markdown-body">
        <blockquote>
        
        
          本文作者 : 小凡 <br/>
        
        原文链接 : <a href="">https://16bh.github.io/2016/08/16/mac-software-list/</a><br>
        版权声明 : 本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！
        </blockquote>
      </div>
    </div>
  
  
  
    <div class="social-share"
  style="margin-top: -2rem"
  data-wechat-qrcode-title="<p>微信扫一扫</p>"
  data-wechat-qrcode-helper="<p>微信右上角, 扫一扫分享</p>"
   data-sites="weibo, wechat, douban" 
  
>
  <span style="color: #6b7487; font-size: 1.4rem;">分享到: </span>
</div>
<script src="https://cdn.bootcss.com/social-share.js/1.0.16/js/social-share.min.js" async>
  

  
    <div id="reward">
  
    <p id="reward-meta">知识 & 情怀 | 二者兼得</p>
  
  <button id="reward-btn">
    
    <span>投食</span>
  </button>
  <div id="reward-qrcode">
    
      <div class="reward-qrcode--container">
        <img class="qrcode-img" src="/images/wechat.png" alt="微信扫一扫, 向我投食">
        <p class="qrcode-meta">微信扫一扫, 向我投食</p>
      </div>
    
      <div class="reward-qrcode--container">
        <img class="qrcode-img" src="/images/alipay.png" alt="支付宝扫一扫, 向我投食">
        <p class="qrcode-meta">支付宝扫一扫, 向我投食</p>
      </div>
    
  </div>

</div>

<script>
  (() => {
    let button = document.querySelector('#reward-btn'),
      qrcode = document.querySelector('#reward-qrcode'),
      display = false;
    
    button.addEventListener('click', () => {
      qrcode.style.display = display ? 'none' : 'block'
      display = !display
    }, false)
  })()
</script>
  

  <div class="article-footer">
    <div class="article-meta pull-left">
      <span>
        
      </span>
    </div>
    <div class="article-meta pull-right">
    </div>
  </div>
</div>


  <aside id="sidebar">
    <p id="sidebar-header"></p>
    <ol id="sidebar-toc"></ol>
  </aside>
  <script async>setTimeout(generateToc, 10);</script>


  <nav class="post-navigation">
    
      <div class="nav-pre">
        <i class="iconfont icon-prev"></i>
        上一篇:
        <a href="/2016/08/03/build-php-develop-environment-in-atom/" target="_self">使用atom进行php开发</a>
      </div>
    
    
      <div class="nav-next">
        下一篇:
        <a href="/2016/08/29/magento-add-column-of-grid-table/" target="_self">[译]给用户grid表增加新的column</a>
        <i class="iconfont icon-next"></i>
      </div>
    
  </nav>

  
    <a href="#comment" class="comment-anchor"></a>
<div class="comment-title"><i class="iconfont icon-footprint"></i> 留下足迹 <i class="iconfont icon-footprint"></i></div>
<div id="vcomments"></div>

<script defer>
  if( true ) {
    let path = getRealPath()
    new Valine({
      el: "#vcomments",
      appId: "NCeV64E5tzksk4EkiV7IUtYj-gzGzoHsz",
      appKey: "tajxyQiSX2markpmi5N0oImA",
      notify: false,
      verify: false,
      avatar: "robohash",
      placeholder: "正确填写邮箱, 才能及时收到回复哦♪(^∇^*)",
      path
    });
  }
</script>
   

  
    <script defer>
const valineAPI = (() => {
  try {
    AV.init("NCeV64E5tzksk4EkiV7IUtYj-gzGzoHsz", "tajxyQiSX2markpmi5N0oImA");
  } catch(error) {}
  const isExist = (identity) => {
    identity = identity || getRealPath();
    let query = new AV.Query('Timer');
    return new Promise((resolve, reject) => {
      query.equalTo("identity", identity);
      query.find().then(results => {
        resolve(results.length > 0);
      }, error => reject(error));
    })
  }

  const _get = (identity) => {
    let query = null;
    if(identity && identity instanceof Array){
      let querys = [];
      for(let i = 0; i < identity.length; ++i) {
        querys[i] = new AV.Query('Timer');
        querys[i].equalTo('identity', identity[i]);
      }
      query = AV.Query.or.apply(null ,querys);
    } else {
      identity = identity || getRealPath();
      query = new AV.Query("Timer");
      query.equalTo("identity", identity);
    }

    return new Promise((resolve, reject) => {
      query.find()
      .then(results => resolve(results))
      .catch(error => reject(error))
    })
  }

  const create = (identity) => {
    identity = identity || getRealPath();
    return new Promise((resolve, reject) => {
      let Todo = AV.Object.extend('Timer');
      let todo = new Todo();
      todo.set("times", 1);
      todo.set("identity", identity);
      todo.save().then(res => resolve(true), error => reject(error));
    })
  }

  const update = (identity) => {
    identity = identity || getRealPath();
    return new Promise((resolve, reject) => {
      let query = new AV.Query('Timer');
      query.equalTo("identity", identity);
      query.find().then(todos => {
        todos.forEach(todo => {
          todo.set("times", todo.attributes.times + 1);
        });
        return AV.Object.saveAll(todos);
      }).then(todos => resolve(true), error => reject(error));
    })
  }

  return {
    isExist,
    _get,
    update,
    create
  }
})()

const calcAndWriteTimes = () => {
  let isPost = true;

  let timerAllDOM = document.querySelectorAll(".article-timer");

  if(isPost) {
    let identity = timerAllDOM[0].getAttribute("data-identity");
    valineAPI.isExist(identity)
    .then(exist => {
      if(exist) {
        return valineAPI.update(identity);
      }
      return new Promise(resolve => resolve(true));
    })
    .then( succuess => valineAPI._get(identity))
    .then( result => timerAllDOM[0].innerText = result[0].attributes.times)
    .catch(error => console.log(error.message))
    return ;
  }

  let timerDOMCache = {};

  for(let timerDOM of timerAllDOM) {
    let identity = timerDOM.getAttribute("data-identity");
    if(timerDOMCache.hasOwnProperty(identity)){
      timerDOMCache[identity].dom.push(timerDOM);
    }else{
      timerDOMCache[identity] = {
        dom: [timerDOM],
        times: undefined
      };
    }
  }

  let identities = Object.keys(timerDOMCache);
  valineAPI._get(identities).then(results => {
    for(let result of results) {
      let {identity, times} = result.attributes;
      timerDOMCache[identity].times = times;
      timerDOMCache[identity].dom.map(item => item.innerText = times);
    }
    for(let identity of identities) {
      if(timerDOMCache[identity].times){
        continue;
      }
      timerDOMCache[identity].dom.map(item => item.innerText = 1);
      valineAPI.create(identity);
    }
  }).catch(error => console.log(error.message))
}

if(true){
  calcAndWriteTimes();
}
</script>
   

</div>


      <footer>
  <p class="site-info">
    博客已萌萌哒运行<span id="time-to-now"></span><span class="my-face">(●'◡'●)ﾉ♥</span>
    <br>
    Theme - <a href="https://github.com/dongyuanxin/theme-bmw">BMW</a> | Made With 💗 | Powered by <a href="https://godbmw.com/">GodBMW</a>
    <br>
    
  </p>
</footer>



<script>
const timeToNowDOM = document.querySelector("#time-to-now");
const startTimestamp = new Date(2015, 11, 21).getTime();

const updateTimeStr = () => {
  let offset = parseInt(
      (new Date().getTime() - startTimestamp) / 1000,
      10
    ),
    day = Math.floor(offset / 86400),
    hour = Math.floor((offset % 86400) / 3600),
    minute = Math.floor(((offset % 86400) % 3600) / 60),
    second = Math.floor(((offset % 86400) % 3600) % 60);
  timeToNowDOM.innerHTML =
    day + "天" + hour + "小时" + minute + "分钟" + second + "秒";
  setTimeout(updateTimeStr, 500);
}

setTimeout(updateTimeStr, 500);
</script>


      <div class="back-to-top hidden">
  <span>
    <i class="iconfont icon-60"></i><span></span>%
  </span>
</div>

<script>
const updateIconToTop = percent => {
  let dom = document.querySelector(".back-to-top span span");
  dom.innerText = percent;
  if(percent < 1) {
    document.querySelector(".back-to-top").className = "back-to-top hidden";
  } else {
    document.querySelector(".back-to-top").className = "back-to-top";
  }
}

const handleScoll = () => {
  let isRunning = false;
  return () => {
    if (isRunning) return;
    isRunning = true;
    window.requestAnimationFrame(timestamp => {
      let scrollTop =
          document.documentElement.scrollTop || document.body.scrollTop,
        scrollHeight =
          document.documentElement.scrollHeight ||
          document.body.scrollHeight,
        clientHeight =
          document.documentElement.clientHeight ||
          document.body.clientHeight;
      isRunning = false;
      if (scrollTop <= 1) {
        updateIconToTop(0);
        return;
      }
      if (scrollTop + clientHeight >= scrollHeight) {
        updateIconToTop(100);
      } else {
        updateIconToTop(parseInt(
          100 * scrollTop / (scrollHeight - clientHeight),
          10
        ));
      }
    });
  };
}

const backToTop = () => {
  let scrollTop =
      document.documentElement.scrollTop || document.body.scrollTop,
    delay = 10,
    time = 200;
  if (scrollTop <= 20) {
    document.documentElement.scrollTop = 0;
    document.body.scrollTop = 0;
    return;
  }
  let step = Math.ceil(scrollTop * delay / time);
  let timer = setInterval(() => {
    scrollTop =
      document.documentElement.scrollTop || document.body.scrollTop;
    if (scrollTop - step <= 0) {
      document.documentElement.scrollTop = 0;
      document.body.scrollTop = 0;
      clearInterval(timer);
    } else {
      document.documentElement.scrollTop = scrollTop - step;
      document.body.scrollTop = scrollTop - step;
    }
  }, delay);
}

document.addEventListener("scroll", handleScoll(), false);

document.querySelector(".back-to-top").addEventListener("click", backToTop, false);

</script>

    </div>

    

    <script src="https://cdn.bootcss.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script>
<script async>
  let fancyTimer = setInterval(function(){
    if(!window.$){
      return;
    }
    $(document).ready(function() {
      $(".post img").each(function () {
        if($(this).parent().get(0).tagName.toLowerCase() === "a") {
          return;
        }
        // $(this).attr("data-fancybox", "gallery"); // if you add 'data-fancybox', img will display after showed
        var element = document.createElement("a");
        $(element).attr("data-fancybox", "gallery");
        $(element).attr("href", $(this).attr("src"));
        $(this).wrap(element);
      });
      
      clearInterval(fancyTimer);
    });
  }, 10);
</script>

    
  </body>

</html>
